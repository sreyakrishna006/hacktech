<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cycle Input</title>

<style>

/* ===== BODY BACKGROUND ===== */
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#fdf2f8,#eef2ff);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

/* ===== APP CONTAINER ===== */
.app{
    width:380px;
    height:750px;
    background:rgba(255,255,255,0.9);
    backdrop-filter: blur(20px);
    border-radius:30px;
    padding:25px;
    box-shadow:0 25px 60px rgba(0,0,0,0.1);
}

/* ===== HEADER ===== */
.header h2{
    margin:0;
    font-weight:600;
    font-size:22px;
    background: linear-gradient(90deg,#ff6ea8,#7a6bff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;           /* Standard property for other browsers */
}

/* ===== SELECTED DATE TEXT ===== */
.selected-date{
    margin-top:10px;
    font-size:14px;
    color:#666;
}

/* ===== CALENDAR CARD ===== */
.calendar{
    margin-top:20px;
    background:linear-gradient(145deg,#ffffff,#f8f7ff);
    padding:20px;
    border-radius:25px;
    box-shadow:0 15px 30px rgba(122,107,255,0.08);
}

/* ===== MONTH NAV ===== */
.month{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:15px;
}

.month span{
    font-weight:600;
    color:#444;
}

.month button{
    border:none;
    background:linear-gradient(135deg,#ff9ccf,#a29bfe);
    color:white;
    border-radius:50%;
    width:35px;
    height:35px;
    cursor:pointer;
}

/* ===== DAYS GRID ===== */
.days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:12px;
}

.day{
    width:42px;
    height:42px;
    display:flex;
    justify-content:center;
    align-items:center;
    border-radius:50%;
    cursor:pointer;
    font-size:14px;
    font-weight:500;
    transition:0.3s;

    /* Improved visibility */
    background:linear-gradient(145deg,#f8d7e6,#e4e1ff);
    color:#333;
}

.day:hover{
    transform:scale(1.08);
}

/* TODAY */
.day.today{
    border:2px solid #a29bfe;
}

/* SELECTED */
.day.selected{
    background:linear-gradient(135deg,#ff6ea8,#7a6bff);
    color:#fff;
    box-shadow:0 8px 20px rgba(122,107,255,0.4);
}

/* ===== MANUAL INPUT ===== */
.manual{
    margin-top:25px;
}

.manual p{
    font-size:13px;
    color:#666;
}

.manual input{
    width:100%;
    padding:12px;
    border-radius:15px;
    border:1px solid #ddd;
    outline:none;
}

.manual input:focus{
    border-color:#a29bfe;
    box-shadow:0 0 8px rgba(162,155,254,0.3);
}

/* ===== SAVE BUTTON ===== */
button.save{
    width:100%;
    margin-top:20px;
    padding:16px;
    border:none;
    border-radius:30px;
    background:linear-gradient(90deg,#ff6ea8,#7a6bff);
    color:#fff;
    font-weight:600;
    font-size:16px;
    cursor:pointer;
    box-shadow:0 10px 25px rgba(122,107,255,0.35);
    letter-spacing:0.5px;
    transition:0.3s;
}

button.save:hover{
    transform:translateY(-2px);
    box-shadow:0 15px 30px rgba(122,107,255,0.45);
}

/* ===== INLINE MESSAGE ===== */
.message{
    margin-top:15px;
    padding:12px;
    border-radius:15px;
    font-size:14px;
    font-weight:500;
    text-align:center;
    opacity:0;
    transform:translateY(10px);
    transition:all 0.4s ease;
}

.message.show{
    opacity:1;
    transform:translateY(0);
}

.message.success{
    background:linear-gradient(90deg,#ffe3f1,#e9e6ff);
    color:#5a4fcf;
    box-shadow:0 5px 15px rgba(122,107,255,0.15);
}

</style>
</head>

<body>

<div class="app">

<div class="header">
    <h2>Begin New Cycle âœ¨</h2>
</div>

<div class="selected-date" id="displayDate">
    No date selected
</div>

<div class="calendar">
    <div class="month">
        <button onclick="changeMonth(-1)">â€¹</button>
        <span id="monthYear"></span>
        <button onclick="changeMonth(1)">â€º</button>
    </div>

    <div class="days" id="calendarDays"></div>
</div>

<div class="manual">
    <p>Or type manually (YYYY-MM-DD)</p>
    <input type="text" id="manualInput" placeholder="2026-02-27">
</div>

<button class="save" onclick="saveDate()">Save Date</button>

<div id="statusMessage" class="message"></div>

</div>

<script>

let currentDate = new Date();
let selectedDate = null;

function renderCalendar(){
    const daysContainer = document.getElementById("calendarDays");
    const monthYear = document.getElementById("monthYear");
    daysContainer.innerHTML = "";

    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    monthYear.innerText = currentDate.toLocaleString('default', { month: 'long' }) + " " + year;

    const firstDay = new Date(year, month, 1).getDay();
    const totalDays = new Date(year, month + 1, 0).getDate();
    const today = new Date();

    for(let i=0; i<firstDay; i++){
        const blank = document.createElement("div");
        daysContainer.appendChild(blank);
    }

    for(let day=1; day<=totalDays; day++){
        const dayDiv = document.createElement("div");
        dayDiv.classList.add("day");
        dayDiv.innerText = day;

        if(
            day === today.getDate() &&
            month === today.getMonth() &&
            year === today.getFullYear()
        ){
            dayDiv.classList.add("today");
        }

        dayDiv.onclick = function(){
            document.querySelectorAll(".day").forEach(d => d.classList.remove("selected"));
            this.classList.add("selected");

            selectedDate = new Date(year, month, day);
            
            // Update the display
            document.getElementById("displayDate").innerText =
                "Selected: " + selectedDate.toDateString();
            
            // Update manual input to match selected date
            const yyyy = selectedDate.getFullYear();
            const mm = String(selectedDate.getMonth() + 1).padStart(2, '0'); // Month is 0-based
            const dd = String(selectedDate.getDate()).padStart(2, '0');
            document.getElementById("manualInput").value = `${yyyy}-${mm}-${dd}`;
        }

        daysContainer.appendChild(dayDiv);
    }
}

function changeMonth(direction){
    currentDate.setMonth(currentDate.getMonth() + direction);
    renderCalendar();
}

function saveDate(){
    const manual = document.getElementById("manualInput").value;

    if(manual){
        selectedDate = new Date(manual);
    }

    if(!selectedDate || isNaN(selectedDate)){
        showMessage("Please select or enter a valid date.", false);
        return;
    }

    localStorage.setItem("lastPeriod", selectedDate);

    const today = new Date();
    const isToday =
        selectedDate.getDate() === today.getDate() &&
        selectedDate.getMonth() === today.getMonth() &&
        selectedDate.getFullYear() === today.getFullYear();

    if(isToday){
        showMessage("You're all set. Today marks a fresh start âœ¨", true);
    } else {
        showMessage("Cycle updated gently ðŸŒ¸", true);
        setTimeout(() => {
            window.location.href = "phasedetails.html";
        }, 1500);
    }
}

function showMessage(text, isSuccess){
    const messageBox = document.getElementById("statusMessage");

    messageBox.innerText = text;
    messageBox.className = "message";

    if(isSuccess){
        messageBox.classList.add("success");
    }

    setTimeout(() => {
        messageBox.classList.add("show");
    }, 10);

    setTimeout(() => {
        messageBox.classList.remove("show");
    }, 3000);
}

renderCalendar();

</script>

</body>
</html>